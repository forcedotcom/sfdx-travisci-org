sudo: true
before_install:
- openssl aes-256-cbc -K $encrypted_d5f195580ab7_key -iv $encrypted_d5f195580ab7_iv
  -in assets/server.key.enc -out assets/server.key -d
- export CLIURL=https://developer.salesforce.com/media/salesforce-cli/sfdx-linux-amd64.tar.xz
- export SFDX_AUTOUPDATE_DISABLE=false
- export SFDX_USE_GENERIC_UNIX_KEYCHAIN=true
- export SFDX_DOMAIN_RETRY=300
- export SFDX_DISABLE_APP_HUB=true
- export SFDX_LOG_LEVEL=DEBUG
- mkdir sfdx
- wget -qO- $CLIURL | tar xJ -C sfdx --strip-components 1
- "./sfdx/install"
- export PATH=./sfdx/$(pwd):$PATH
before_script:
- export DEPLOYDIR=src
- export TESTLEVEL=RunLocalTests
- sfdx --version
- sfdx plugins --core
script:
- sfdx force:auth:jwt:grant --instanceurl https://test.salesforce.com  --clientid
  $CONSUMERKEY --jwtkeyfile assets/server.key --username $USERNAME --setalias UAT
- sfdx force:mdapi:deploy --wait 10 --deploydir $DEPLOYDIR --targetusername UAT --testlevel
  $TESTLEVEL
env:
  global:
  - secure: oyP6cY1WHt+vpZPAuVNgD9CXTZlk19rkR1Mqc5bHWDxiZH8gVwOebsNpPECwAzapvdLq/vMEFY3LjHEsz3z7ril8phhvmQ2GzCp/zcn4Ji7hQK+I4bvbS3jkkvppXpmNnpjYv3fxogc29gAh8r0nEstl/0EjusZM/hCilAfNSz+Bel9+ZIrapj/Pt180/8huUQYNxwlWMsryltNhrSBPsvaCwI4QGYUmrfJCJs9fLyXrL/KPILfrn/v1nGqY8TfBLEf/zQlsQLpQd7ftuwtS37+9ENCfi5qm7Wg4qy4u6W+0fzjgrF46HXVwrnIMlqak/zq0C0bEIyK0WOieLhVpjzMjyHoakbNynvE3Qc6J3xv6pObW3LfjPZAWxUz9DsRyTq1g63mNCSopq3tA+QVWXdslkz6xanKa8+vmepfT8zBIYF3h07KgLp1gVCeT9eCbWUKE8UlSdg+CMojqh77XMBNVs90MMHNg67c5r0fOSZv23vWYPEBOem+IMhUvLTy99QlW70nP0ANF9bExLWK9TNVuMDV7kWWtXNhOEWBygQB6iMY4xgegB5wiq5SVHWmrB4AvOZTsoSSZpBCZU2+wdAhO4t2XkmGYfF8QDxAVJrPwUc/WY0gpMImRGKHMHdPvkCjrJByXXhTYLb1vFx543mShyfqv3m6+gkHuX235uF8=
  - secure: pwI14zFdKcdFFnZ7MUljEP0U14qq7Lg+STqcVUr7yA+Os6MECiBHWMqwF6/3woZ59WGe7JRp6NdUYtr9Q+kW28nOI72qNPrbq5BV1LBg8+VqsjJZVDPiPk1uWVmc/SN+XR2bDm7m84jVvTQ2L08vlm4cm90qo6jEYfzj605gbLWvBifica2BW40xZKYdLvXF08EujgkOIfLRzVBUaqpVj+TzNSKZHj/3eLtI0cwkZQBmVYCZ8x/IDUvQTjorRKJul4Jj5nb5rbAhmMX2oN5kcBXcHnBuwNWsDfSkPhgWlBmn0zzoLSuFnbA0paYsUyyKvM2N2/tDUCabWbsPLa7h5EA5U6NLabFiw56uf1VCIzWaT9kN0uoyxLFV0hLnfAF8V3MDQvO5YjTF57Dvm3vKXz3ASZQm/1zbOoH0vSMagnjc8UUDVHJhZJWBvZZ885G9jcQJUFxVA1525NrqELqRiHxta9ty/khBG5aBASgmVbTjjQDm2Gmn6C/YfwNgJSEVYY3M9YvdaL7vfbN+RIXs7MfmX3FSRVWAFB10newQvRO14e3EYRsaxaG5Ty11VfgSRytlZUAKTw84UWLC/itnRtb+lN7OpGC91EyvIBOqDWuVUCo6JpZ1RgiQBKizD3DDbREuTQ/FRSWINPKoYhLlZfhywHWo6e782JTK3NOFbD4=
  - secure: sriBN+xKexiptaWj6+wXFY+mHW2KO69R0vjn0/MQd9HuyWIi8IgKvBGRXfnTlE+APflbsFr3HHDsgxsZbt2ImSeGndXULJBInChPnmdCST/jHKgWkU6ooeGe5qZsQ2RSptDg+YCs1Z/yomoARi2PUH8CP8ae5cMB3Vs26eVvmh9zv5l2gLQL5Ebn30+0NimmF87rcn7HcFvY8uR5gZ4dPN7BaBAjNtSQUwUv/A8FfPLEKAAZUDH9QXUz0QuFY5IhvMw/WiU/87y1hYXthJpZLMDPPjleI63qdidnKFblvT67WELM9Ezk2LHr5vJk7m6FBLSfUPsgGpPQp2YTdEARtfsvW3Ta6DPdszFD2M7wf8Wr7C5uC4l4OiUlXkRYhi42wjH2bs1lSLiROsTKSx3jxaA4eo39ujchG6FOTHjzqx/yIY+4tLpBD9bfCLqkdHpDdgtwFNuLURtRIgpsSXrJTV8hNBYS9eHTU5VYK1J40K9VVcwhQzhBq3oSH5n96y0FbUigiKZ9PfU+xjM/VdNiH1GhNBlZGsWgYuGUFDy4s8rJQWHVd0ok/4sf5TlNvXxY65Sxi6I1sqf5aM0fJYQc0kOZXV9UmDlrDY74WQwQYh678V6siB1HgkOi0LkKE8rKuI1Zv09kZ7nDFbMv4sh0hjldvazm2ZCdBYmaalnWjjc=
  - secure: rl2NTIe4wzCM6YxxylIzwcAHKArxYLz4jlE/pvU2cmq+qiazNs+KZeIFK1TBwXsbVnzOI4wKZP4dw6RWTUw420xIZok39B7E/ll6/cJo+WU024RSys1bryi5h5uTPIBuH7SYUboKQhOjWNqRyCBcmQvgyBFLNHk3wsWVI4nDfMszeA0lMuDR63HUvDXa2y2mCVzrNMOGozO6uvss9w+IMxzjPCR1kKt4eOpksZtT0pGzpNR34RamAGy6wbIktWBpFDPTkSd0OkjwG7nXGSD9i5uQMHiQdWLt1L1wh9IMgy2xDAQnl9E1rgZIKe4S5jzTcdqttE6qT2+oLJAFXgLmbop8p1VqX4rb4VGHqvXiC6gwfbGMuDWh4AWUwPy//PajLXaOC0iQkmPC81NfobC1Kd1v8K3gY2FK8wth0+dShbpKMWNlG8k6LjGUogHYjtkO9F7vuECj1BVakeoM9Oo70XHKzRHP8IhashsB9wFHOSbnngvgJe5mzQmkAkgAZLRHnSS4VS926WC2r3SUvwHtfa/I2MqBdW9biOdLzP7ou/DN4AcCWXJ/WmcokhQ9cPnaBQWcxTnij/5z5FApKteYrWdC9DTyFjYJx+DgBq8hx57k0yyoRASqhhsBUZIIPmlPf6GWnVrL0Y/lZ5fZcpxDc96z/neQO7BwbLEssmnUOKs=
